{"ast":null,"code":"import React,{useRef,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const QRScanner=_ref=>{let{isOpen,onScan,onClose}=_ref;const videoRef=useRef(null);const canvasRef=useRef(null);const startCamera=async()=>{try{const stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:'environment'}});if(videoRef.current){videoRef.current.srcObject=stream;}}catch(error){console.error('Error accessing camera:',error);alert('Camera access denied. Please allow camera permissions and try again.');}};const stopCamera=()=>{if(videoRef.current&&videoRef.current.srcObject){const tracks=videoRef.current.srcObject.getTracks();tracks.forEach(track=>track.stop());videoRef.current.srcObject=null;}};const captureAndScan=()=>{if(!videoRef.current||!canvasRef.current)return;const canvas=canvasRef.current;const video=videoRef.current;const context=canvas.getContext('2d');canvas.width=video.videoWidth;canvas.height=video.videoHeight;context.drawImage(video,0,0,canvas.width,canvas.height);// For now, we'll simulate QR scanning by asking user to input manually\n// In a real app, you'd use a QR code library here\nconst qrData=prompt('QR Scanner: Please paste the QR code URL or scan result:');if(qrData){onScan(qrData);}};useEffect(()=>{if(isOpen){startCamera();}else{stopCamera();}return()=>{stopCamera();};},[isOpen]);if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"qr-scanner-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"qr-scanner-popup\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"qr-scanner-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCF1 Scan QR Code for Attendance\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:onClose,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scanner-content\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,playsInline:true,style:{width:'100%',maxWidth:'400px',borderRadius:'8px'}}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{display:'none'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scanner-instructions\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDCCD Position the QR code within the camera view\"}),/*#__PURE__*/_jsx(\"button\",{className:\"scan-btn\",onClick:captureAndScan,children:\"\\uD83D\\uDCF7 Capture & Scan QR Code\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.8em',color:'#666',marginTop:'10px'},children:\"Alternative: Manually input QR code data when prompted\"})]})]})});};export default QRScanner;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}