{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import image512 from\"../assets/logo512.png\";import image192 from\"../assets/logo192.png\";import{SHA256}from\"crypto-js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ForgotPassword=()=>{// eslint-disable-next-line\nconst[showPassword,setShowPassword]=useState(false);// eslint-disable-next-line\nconst[token,setToken]=useState(localStorage.getItem(\"token\")||\"\");const[SaveOTP,setOtp]=useState(Math.floor(100000+Math.random()*900000)||0);const navigate=useNavigate();function computeHash(input){return SHA256(input).toString();}const toggleTwo=async e=>{e.preventDefault();const email=document.querySelector(\"input[name=email]\").value;if(email===\"\"){alert(\"Please enter your email\");return;}try{document.querySelector(\".page1\").style.display=\"none\";document.querySelector(\".page2\").style.display=\"block\";await axios.post(\"http://localhost:5000/users/sendmail\",{email:email}).then(res=>{setOtp(res.data.otp);}).catch(err=>{console.log(err);});}catch(error){alert(\"Error sending OTP\");}};const toggleThree=async e=>{e.preventDefault();const otp=document.querySelector(\"input[name=otp]\").value;if(otp===\"\"){alert(\"Please enter OTP\");return;}if(parseInt(otp)===parseInt(SaveOTP)){document.querySelector(\".page2\").style.display=\"none\";document.querySelector(\".page3\").style.display=\"block\";}else{alert(\"Invalid OTP\");}};const handleRegisterSubmit=async e=>{e.preventDefault();let password=document.querySelector(\"input[name=password]\").value;const cpassword=document.querySelector(\"input[name=cpassword]\").value;if(password.length>0&&cpassword.length>0){if(password===cpassword){const email=document.querySelector(\"input[name=email]\").value;password=computeHash(password);password=computeHash(email+password);const formData={email,password};try{await axios.post(\"http://localhost:5000/users/forgotpassword\",formData);navigate(\"/login\");}catch(err){console.log(err);}}else{alert(\"Passwords do not match\");}}else{alert(\"Please fill all the fields\");}};useEffect(()=>{if(token!==\"\"){navigate(\"/dashboard\");}});return/*#__PURE__*/_jsxs(\"div\",{className:\"register-main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"register-left\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"Full\",src:image512})}),/*#__PURE__*/_jsx(\"div\",{className:\"register-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"register-right-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"register-logo\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"logo\",src:image192})}),/*#__PURE__*/_jsxs(\"div\",{className:\"register-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Forgot your Password?\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRegisterSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page1\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Please enter your Email Id\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",required:true,name:\"email\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:toggleTwo,children:\"Send OTP\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"page2\",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Please enter OTP\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"OTP\",name:\"otp\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:toggleThree,children:\"Submit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"page3\",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Please enter new password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"New Password\",required:true,name:\"password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\" Confirm New Password\",required:true,name:\"cpassword\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Change Password\"})]})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"login-bottom-p\",children:[\"Already have an account?\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/login\",style:{color:\"#76ABAE\"},children:\"Login\"})]})]})})]});};export default ForgotPassword;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","axios","image512","image192","SHA256","jsx","_jsx","jsxs","_jsxs","ForgotPassword","showPassword","setShowPassword","token","setToken","localStorage","getItem","SaveOTP","setOtp","Math","floor","random","navigate","computeHash","input","toString","toggleTwo","e","preventDefault","email","document","querySelector","value","alert","style","display","post","then","res","data","otp","catch","err","console","log","error","toggleThree","parseInt","handleRegisterSubmit","password","cpassword","length","formData","className","children","alt","src","onSubmit","type","placeholder","required","name","onClick","to","color"],"sources":["C:/Users/RIMI/Desktop/eduattend/Atendo-main/frontend/src/pages/ForgotPassword.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport image512 from \"../assets/logo512.png\";\r\nimport image192 from \"../assets/logo192.png\";\r\nimport { SHA256 } from \"crypto-js\";\r\n\r\nconst ForgotPassword = () => {\r\n  // eslint-disable-next-line\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  // eslint-disable-next-line\r\n  const [token, setToken] = useState(localStorage.getItem(\"token\") || \"\");\r\n  const [SaveOTP, setOtp] = useState(\r\n    Math.floor(100000 + Math.random() * 900000) || 0\r\n  );\r\n  const navigate = useNavigate();\r\n\r\n  function computeHash(input) {\r\n    return SHA256(input).toString();\r\n  }\r\n\r\n  const toggleTwo = async (e) => {\r\n    e.preventDefault();\r\n    const email = document.querySelector(\"input[name=email]\").value;\r\n    if (email === \"\") {\r\n      alert(\"Please enter your email\");\r\n      return;\r\n    }\r\n    try {\r\n      document.querySelector(\".page1\").style.display = \"none\";\r\n      document.querySelector(\".page2\").style.display = \"block\";\r\n      await axios\r\n        .post(\"http://localhost:5000/users/sendmail\", {\r\n          email: email,\r\n        })\r\n        .then((res) => {\r\n          setOtp(res.data.otp);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    } catch (error) {\r\n      alert(\"Error sending OTP\");\r\n    }\r\n  };\r\n\r\n  const toggleThree = async (e) => {\r\n    e.preventDefault();\r\n    const otp = document.querySelector(\"input[name=otp]\").value;\r\n    if (otp === \"\") {\r\n      alert(\"Please enter OTP\");\r\n      return;\r\n    }\r\n    if (parseInt(otp) === parseInt(SaveOTP)) {\r\n      document.querySelector(\".page2\").style.display = \"none\";\r\n      document.querySelector(\".page3\").style.display = \"block\";\r\n    } else {\r\n      alert(\"Invalid OTP\");\r\n    }\r\n  };\r\n\r\n  const handleRegisterSubmit = async (e) => {\r\n    e.preventDefault();\r\n    let password = document.querySelector(\"input[name=password]\").value;\r\n    const cpassword = document.querySelector(\"input[name=cpassword]\").value;\r\n    if (password.length > 0 && cpassword.length > 0) {\r\n      if (password === cpassword) {\r\n        const email = document.querySelector(\"input[name=email]\").value;\r\n        password = computeHash(password);\r\n        password = computeHash(email + password);\r\n\r\n        const formData = {\r\n          email,\r\n          password,\r\n        };\r\n        try {\r\n          await axios.post(\r\n            \"http://localhost:5000/users/forgotpassword\",\r\n            formData\r\n          );\r\n          navigate(\"/login\");\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      } else {\r\n        alert(\"Passwords do not match\");\r\n      }\r\n    } else {\r\n      alert(\"Please fill all the fields\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (token !== \"\") {\r\n      navigate(\"/dashboard\");\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div className=\"register-main\">\r\n      <div className=\"register-left\">\r\n        <img alt=\"Full\" src={image512} />\r\n      </div>\r\n      <div className=\"register-right\">\r\n        <div className=\"register-right-container\">\r\n          <div className=\"register-logo\">\r\n            <img alt=\"logo\" src={image192} />\r\n          </div>\r\n          <div className=\"register-center\">\r\n            <h2>Forgot your Password?</h2>\r\n            <form onSubmit={handleRegisterSubmit}>\r\n              <div className=\"page1\">\r\n                <p>Please enter your Email Id</p>\r\n                <input type=\"email\" placeholder=\"Email\" required name=\"email\" />\r\n                <button type=\"button\" onClick={toggleTwo}>\r\n                  Send OTP\r\n                </button>\r\n              </div>\r\n              <div className=\"page2\" style={{ display: \"none\" }}>\r\n                <p>Please enter OTP</p>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"OTP\"\r\n                  name=\"otp\"\r\n                  required={true}\r\n                />\r\n                <button type=\"button\" onClick={toggleThree}>\r\n                  Submit\r\n                </button>\r\n              </div>\r\n              <div className=\"page3\" style={{ display: \"none\" }}>\r\n                <p>Please enter new password</p>\r\n                <input\r\n                  type=\"password\"\r\n                  placeholder=\"New Password\"\r\n                  required\r\n                  name=\"password\"\r\n                />\r\n                <input\r\n                  type=\"password\"\r\n                  placeholder=\" Confirm New Password\"\r\n                  required\r\n                  name=\"cpassword\"\r\n                />\r\n                <button type=\"submit\">Change Password</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <p className=\"login-bottom-p\">\r\n            Already have an account?{\" \"}\r\n            <Link to=\"/login\" style={{ color: \"#76ABAE\" }}>\r\n              Login\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ForgotPassword;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}