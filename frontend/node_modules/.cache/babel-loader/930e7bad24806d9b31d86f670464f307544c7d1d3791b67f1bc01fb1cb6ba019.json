{"ast":null,"code":"//create a new session component\nimport React,{useEffect,useState}from\"react\";import axios from\"axios\";import QRCode from\"qrcode.react\";import\"../styles/SessionDetails.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SessionDetails=props=>{const[qr,setQR]=useState(\"\");async function getQR(){await axios.post(\"http://localhost:5000/sessions/getQR\",{session_id:props.currentSession[0].session_id,token:localStorage.getItem(\"token\")}).then(response=>{setQR(response.data.url);}).catch(error=>{console.log(error);});}const showImage=e=>{let image=e.target.src;let imageWindow=window.open(\"\",\"_blank\");imageWindow.document.write(\"<img src=\".concat(image,\" alt=\\\"student\\\" width=\\\"50%\\\" />\"));};const copyQR=()=>{navigator.clipboard.writeText(qr);};function getDistance(distance,radius){return{distance,color:distance<=parseFloat(radius)?\"green\":\"red\"};}useEffect(()=>{getQR();});return/*#__PURE__*/_jsxs(\"div\",{className:\"popup\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:props.toggleSessionDetails,children:/*#__PURE__*/_jsx(\"strong\",{children:\"X\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-inner\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"session-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Name\"}),\": \",props.currentSession[0].name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Date\"}),\":\",\" \",props.currentSession[0].date.split(\"T\")[0]]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Time\"}),\": \",props.currentSession[0].time]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Duration\"}),\":\",\" \",props.currentSession[0].duration]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Location\"}),\":\",\" \",props.currentSession[0].location]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Radius\"}),\": \",props.currentSession[0].radius,\" \",\"meters\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"qr-code\",children:[/*#__PURE__*/_jsx(QRCode,{value:qr,onClick:copyQR,size:200}),/*#__PURE__*/_jsx(\"button\",{onClick:copyQR,className:\"copybtn\",children:\"Copy\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"student-list scrollable-content\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Students Attended:\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Reg No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"IP\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Distance\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:props.currentSession[0].attendance.map((student,index)=>{return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:student.regno}),/*#__PURE__*/_jsx(\"td\",{children:student.IP}),/*#__PURE__*/_jsx(\"td\",{children:student.date.split(\"T\")[0]}),/*#__PURE__*/_jsx(\"td\",{children:student.student_email}),/*#__PURE__*/_jsx(\"th\",{className:\"distance\",style:{color:getDistance(student.distance,props.currentSession[0].radius).color},children:getDistance(student.distance,props.currentSession[0].radius).distance},index+\"6\"),student.image!==undefined?/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:student.image,alt:\"student\",className:\"student-image\",width:100,onClick:showImage})}):/*#__PURE__*/_jsx(\"td\",{children:\"No Image\"})]},index);})})]})]})]})]});};export default SessionDetails;","map":{"version":3,"names":["React","useEffect","useState","axios","QRCode","jsx","_jsx","jsxs","_jsxs","SessionDetails","props","qr","setQR","getQR","post","session_id","currentSession","token","localStorage","getItem","then","response","data","url","catch","error","console","log","showImage","e","image","target","src","imageWindow","window","open","document","write","concat","copyQR","navigator","clipboard","writeText","getDistance","distance","radius","color","parseFloat","className","children","onClick","toggleSessionDetails","name","date","split","time","duration","location","value","size","attendance","map","student","index","regno","IP","student_email","style","undefined","alt","width"],"sources":["C:/Users/RIMI/Desktop/eduattend/Atendo-main/frontend/src/pages/SessionDetails.js"],"sourcesContent":["//create a new session component\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport QRCode from \"qrcode.react\";\r\nimport \"../styles/SessionDetails.css\";\r\n\r\nconst SessionDetails = (props) => {\r\n  const [qr, setQR] = useState(\"\");\r\n\r\n  async function getQR() {\r\n    await axios\r\n      .post(\"http://localhost:5000/sessions/getQR\", {\r\n        session_id: props.currentSession[0].session_id,\r\n        token: localStorage.getItem(\"token\"),\r\n      })\r\n      .then((response) => {\r\n        setQR(response.data.url);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n  const showImage = (e) => {\r\n    let image = e.target.src;\r\n    let imageWindow = window.open(\"\", \"_blank\");\r\n    imageWindow.document.write(\r\n      `<img src=${image} alt=\"student\" width=\"50%\" />`\r\n    );\r\n  };\r\n  const copyQR = () => {\r\n    navigator.clipboard.writeText(qr);\r\n  };\r\n\r\n  function getDistance(distance, radius) {\r\n    return {\r\n      distance,\r\n      color: distance <= parseFloat(radius) ? \"green\" : \"red\",\r\n    };\r\n  }\r\n\r\n  useEffect(() => {\r\n    getQR();\r\n  });\r\n\r\n  return (\r\n    <div className=\"popup\">\r\n      <button onClick={props.toggleSessionDetails}>\r\n        <strong>X</strong>\r\n      </button>\r\n      <div className=\"popup-inner\">\r\n        <div className=\"popup-content\">\r\n          <div className=\"session-details\">\r\n            <p>\r\n              <strong>Session Name</strong>: {props.currentSession[0].name}\r\n            </p>\r\n            <p>\r\n              <strong>Session Date</strong>:{\" \"}\r\n              {props.currentSession[0].date.split(\"T\")[0]}\r\n            </p>\r\n            <p>\r\n              <strong>Session Time</strong>: {props.currentSession[0].time}\r\n            </p>\r\n            <p>\r\n              <strong>Session Duration</strong>:{\" \"}\r\n              {props.currentSession[0].duration}\r\n            </p>\r\n            <p>\r\n              <strong>Session Location</strong>:{\" \"}\r\n              {props.currentSession[0].location}\r\n            </p>\r\n            <p>\r\n              <strong>Session Radius</strong>: {props.currentSession[0].radius}{\" \"}\r\n              meters\r\n            </p>\r\n          </div>\r\n          <div className=\"qr-code\">\r\n            <QRCode value={qr} onClick={copyQR} size={200} />\r\n            <button onClick={copyQR} className=\"copybtn\">\r\n              Copy\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"student-list scrollable-content\">\r\n          <p>Students Attended:</p>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Reg No</th>\r\n                <th>IP</th>\r\n                <th>Date</th>\r\n                <th>Email</th>\r\n                <th>Distance</th>\r\n                <th>Image</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {props.currentSession[0].attendance.map((student, index) => {\r\n                return (\r\n                  <tr key={index}>\r\n                    <td>{student.regno}</td>\r\n                    <td>{student.IP}</td>\r\n                    <td>{student.date.split(\"T\")[0]}</td>\r\n                    <td>{student.student_email}</td>\r\n                    <th\r\n                      key={index + \"6\"}\r\n                      className=\"distance\"\r\n                      style={{\r\n                        color: getDistance(\r\n                          student.distance,\r\n                          props.currentSession[0].radius\r\n                        ).color,\r\n                      }}\r\n                    >\r\n                      {\r\n                        getDistance(\r\n                          student.distance,\r\n                          props.currentSession[0].radius\r\n                        ).distance\r\n                      }\r\n                    </th>\r\n                    {student.image !== undefined ? (\r\n                      <td>\r\n                        <img\r\n                          src={student.image}\r\n                          alt=\"student\"\r\n                          className=\"student-image\"\r\n                          width={100}\r\n                          onClick={showImage}\r\n                        />\r\n                      </td>\r\n                    ) : (\r\n                      <td>No Image</td>\r\n                    )}\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SessionDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}