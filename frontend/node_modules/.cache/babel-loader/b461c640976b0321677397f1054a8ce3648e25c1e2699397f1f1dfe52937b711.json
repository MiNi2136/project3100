{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\RIMI\\\\Desktop\\\\eduattend\\\\Atendo-main\\\\frontend\\\\src\\\\pages\\\\StudentForm.js\",\n  _s = $RefreshSig$();\n//create a new session component\nimport React, { useState, useRef, useEffect } from \"react\";\nimport axios from \"axios\";\nimport API_BASE_URL from \"../config/api\";\nimport \"../styles/StudentForm.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StudentForm = ({\n  togglePopup\n}) => {\n  _s();\n  //eslint-disable-next-line\n  const [token, setToken] = useState(localStorage.getItem(\"token\") || \"\");\n  const [image, setImage] = useState(null);\n  const [photoData, setPhotoData] = useState(\"\"); // To store the captured photo data\n  const [isCameraActive, setIsCameraActive] = useState(false);\n  const videoRef = useRef(null);\n  const constraints = {\n    video: true\n  };\n  const startCamera = () => {\n    if (!videoRef.current) {\n      console.error(\"Video element not available\");\n      return;\n    }\n    navigator.mediaDevices.getUserMedia(constraints).then(stream => {\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        setIsCameraActive(true);\n      }\n    }).catch(error => {\n      console.error(\"Error accessing camera:\", error);\n      alert(\"Unable to access camera. Please check your camera permissions.\");\n    });\n  };\n  const stopCamera = () => {\n    if (!videoRef.current || !videoRef.current.srcObject) {\n      return;\n    }\n    const stream = videoRef.current.srcObject;\n    const tracks = stream.getTracks();\n    tracks.forEach(track => track.stop());\n    videoRef.current.srcObject = null;\n    setIsCameraActive(false);\n  };\n  const capturePhoto = async () => {\n    if (!videoRef.current) {\n      alert(\"Camera not available. Please start the camera first.\");\n      return;\n    }\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = videoRef.current.videoWidth;\n    canvas.height = videoRef.current.videoHeight;\n    canvas.getContext(\"2d\").drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\n    const photoDataUrl = canvas.toDataURL(\"image/png\");\n    setImage(await fetch(photoDataUrl).then(res => res.blob()));\n    setPhotoData(photoDataUrl);\n    stopCamera();\n  };\n  const ResetCamera = () => {\n    setPhotoData(\"\");\n    setImage(null);\n    startCamera();\n  };\n  const AttendSession = async e => {\n    e.preventDefault();\n    let regno = e.target.regno.value;\n    if (!token) {\n      alert(\"Session expired. Please login again.\");\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n      return;\n    }\n\n    //get user IP address\n    axios.defaults.withCredentials = false;\n    const res = await axios.get(\"https://api64.ipify.org?format=json\");\n    axios.defaults.withCredentials = true;\n    //\n    let IP = res.data.ip;\n    if (navigator.geolocation) {\n      console.log(\"Geolocation is supported!\");\n      navigator.geolocation.getCurrentPosition(async position => {\n        const {\n          latitude,\n          longitude\n        } = position.coords;\n        let locationString = `${latitude},${longitude}`;\n        if (regno.length > 0) {\n          if (!image) {\n            alert(\"Please capture a photo before submitting attendance!\");\n            return;\n          }\n          const formData = new FormData();\n          formData.append('token', token);\n          formData.append('regno', regno);\n          formData.append('session_id', localStorage.getItem(\"session_id\"));\n          formData.append('teacher_email', localStorage.getItem(\"teacher_email\"));\n          formData.append('IP', IP);\n          formData.append('date', new Date().toISOString().split(\"T\")[0]);\n          formData.append('Location', locationString);\n          formData.append('student_email', localStorage.getItem(\"email\"));\n          formData.append('image', image, 'attendance-photo.png');\n          try {\n            const response = await axios.post(`${API_BASE_URL}/sessions/attend_session`, formData, {\n              headers: {\n                \"Content-Type\": \"multipart/form-data\"\n              }\n            });\n            //replace the contents of the popup with success message\n            document.querySelector(\".form-popup-inner\").innerHTML = `\n                <div style=\"text-align: center; padding: 20px;\">\n                  <div style=\"font-size: 48px; margin-bottom: 15px;\">✅</div>\n                  <h3 style=\"color: #27ae60; margin-bottom: 10px;\">Attendance Marked Successfully!</h3>\n                  <p style=\"color: #555; margin-bottom: 20px;\">${response.data.message}</p>\n                  <button onclick=\"window.location.reload()\" style=\"\n                    background: linear-gradient(135deg, #27ae60, #219a52);\n                    color: white;\n                    border: none;\n                    padding: 10px 25px;\n                    border-radius: 20px;\n                    cursor: pointer;\n                    font-size: 14px;\n                  \">Close & Return to Dashboard</button>\n                </div>\n              `;\n          } catch (err) {\n            var _err$response, _err$response$data;\n            console.error(\"Attendance submission error:\", err);\n\n            // Check if it's a 401 error (token expired)\n            if (err.response && err.response.status === 401) {\n              localStorage.removeItem('token');\n              window.location.href = '/login';\n              return;\n            }\n\n            // Get specific error message from server if available\n            const errorMessage = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Please try again or contact your teacher.\";\n\n            // Show error message\n            document.querySelector(\".form-popup-inner\").innerHTML = `\n                <div style=\"text-align: center; padding: 20px;\">\n                  <div style=\"font-size: 48px; margin-bottom: 15px;\">❌</div>\n                  <h3 style=\"color: #e74c3c; margin-bottom: 10px;\">Attendance Failed!</h3>\n                  <p style=\"color: #555; margin-bottom: 20px;\">${errorMessage}</p>\n                  <button onclick=\"window.location.reload()\" style=\"\n                    background: linear-gradient(135deg, #e74c3c, #c0392b);\n                    color: white;\n                    border: none;\n                    padding: 10px 25px;\n                    border-radius: 20px;\n                    cursor: pointer;\n                    font-size: 14px;\n                  \">Try Again</button>\n                </div>\n              `;\n          }\n        } else {\n          alert(\"Please fill all the fields\");\n        }\n      }, error => {\n        console.error(\"Error getting geolocation:\", error);\n      });\n    } else {\n      alert(\"Geolocation is not supported by this browser.\");\n      console.error(\"Geolocation is not supported by this browser.\");\n    }\n  };\n\n  // useEffect to handle component cleanup\n  useEffect(() => {\n    // Cleanup function to stop camera when component unmounts\n    return () => {\n      const video = videoRef.current;\n      if (video && video.srcObject) {\n        const stream = video.srcObject;\n        const tracks = stream.getTracks();\n        tracks.forEach(track => track.stop());\n        video.srcObject = null;\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-popup\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: togglePopup,\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-popup-inner\",\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Enter Your Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), !photoData && /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        width: 300,\n        autoPlay: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 24\n      }, this), photoData && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: photoData,\n        width: 300,\n        alt: \"Captured\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cam-btn\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: isCameraActive ? stopCamera : startCamera,\n          children: isCameraActive ? 'Stop Camera' : 'Start Camera'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: capturePhoto,\n          disabled: !isCameraActive,\n          children: \"Capture\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: ResetCamera,\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: AttendSession,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"regno\",\n          placeholder: \"RegNo\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Done\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentForm, \"WX9i/5iCEfZ+YisUALkHfNq0KvY=\");\n_c = StudentForm;\nexport default StudentForm;\nvar _c;\n$RefreshReg$(_c, \"StudentForm\");","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","API_BASE_URL","jsxDEV","_jsxDEV","StudentForm","togglePopup","_s","token","setToken","localStorage","getItem","image","setImage","photoData","setPhotoData","isCameraActive","setIsCameraActive","videoRef","constraints","video","startCamera","current","console","error","navigator","mediaDevices","getUserMedia","then","stream","srcObject","catch","alert","stopCamera","tracks","getTracks","forEach","track","stop","capturePhoto","canvas","document","createElement","width","videoWidth","height","videoHeight","getContext","drawImage","photoDataUrl","toDataURL","fetch","res","blob","ResetCamera","AttendSession","e","preventDefault","regno","target","value","removeItem","window","location","href","defaults","withCredentials","get","IP","data","ip","geolocation","log","getCurrentPosition","position","latitude","longitude","coords","locationString","length","formData","FormData","append","Date","toISOString","split","response","post","headers","querySelector","innerHTML","message","err","_err$response","_err$response$data","status","errorMessage","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","autoPlay","src","alt","disabled","onSubmit","type","name","placeholder","autoComplete","_c","$RefreshReg$"],"sources":["C:/Users/RIMI/Desktop/eduattend/Atendo-main/frontend/src/pages/StudentForm.js"],"sourcesContent":["//create a new session component\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport API_BASE_URL from \"../config/api\";\r\nimport \"../styles/StudentForm.css\";\r\n\r\nconst StudentForm = ({ togglePopup }) => {\r\n  //eslint-disable-next-line\r\n  const [token, setToken] = useState(localStorage.getItem(\"token\") || \"\");\r\n  const [image, setImage] = useState(null);\r\n  const [photoData, setPhotoData] = useState(\"\"); // To store the captured photo data\r\n  const [isCameraActive, setIsCameraActive] = useState(false);\r\n  const videoRef = useRef(null);\r\n\r\n  const constraints = {\r\n    video: true,\r\n  };\r\n  const startCamera = () => {\r\n    if (!videoRef.current) {\r\n      console.error(\"Video element not available\");\r\n      return;\r\n    }\r\n    \r\n    navigator.mediaDevices\r\n      .getUserMedia(constraints)\r\n      .then((stream) => {\r\n        if (videoRef.current) {\r\n          videoRef.current.srcObject = stream;\r\n          setIsCameraActive(true);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error accessing camera:\", error);\r\n        alert(\"Unable to access camera. Please check your camera permissions.\");\r\n      });\r\n  };\r\n  const stopCamera = () => {\r\n    if (!videoRef.current || !videoRef.current.srcObject) {\r\n      return;\r\n    }\r\n    \r\n    const stream = videoRef.current.srcObject;\r\n    const tracks = stream.getTracks();\r\n\r\n    tracks.forEach((track) => track.stop());\r\n    videoRef.current.srcObject = null;\r\n    setIsCameraActive(false);\r\n  };\r\n  const capturePhoto = async () => {\r\n    if (!videoRef.current) {\r\n      alert(\"Camera not available. Please start the camera first.\");\r\n      return;\r\n    }\r\n    \r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = videoRef.current.videoWidth;\r\n    canvas.height = videoRef.current.videoHeight;\r\n    canvas\r\n      .getContext(\"2d\")\r\n      .drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\r\n\r\n    const photoDataUrl = canvas.toDataURL(\"image/png\");\r\n\r\n    setImage(await fetch(photoDataUrl).then((res) => res.blob()));\r\n\r\n    setPhotoData(photoDataUrl);\r\n    stopCamera();\r\n  };\r\n  const ResetCamera = () => {\r\n    setPhotoData(\"\");\r\n    setImage(null);\r\n    startCamera();\r\n  };\r\n\r\n  const AttendSession = async (e) => {\r\n    e.preventDefault();\r\n    let regno = e.target.regno.value;\r\n    \r\n    if (!token) {\r\n      alert(\"Session expired. Please login again.\");\r\n      localStorage.removeItem('token');\r\n      window.location.href = '/login';\r\n      return;\r\n    }\r\n    \r\n    //get user IP address\r\n    axios.defaults.withCredentials = false;\r\n    const res = await axios.get(\"https://api64.ipify.org?format=json\");\r\n    axios.defaults.withCredentials = true;\r\n    //\r\n    let IP = res.data.ip;\r\n    if (navigator.geolocation) {\r\n      console.log(\"Geolocation is supported!\");\r\n      navigator.geolocation.getCurrentPosition(\r\n        async (position) => {\r\n          const { latitude, longitude } = position.coords;\r\n          let locationString = `${latitude},${longitude}`;\r\n\r\n          if (regno.length > 0) {\r\n            \r\n            if (!image) {\r\n              alert(\"Please capture a photo before submitting attendance!\");\r\n              return;\r\n            }\r\n            \r\n            const formData = new FormData();\r\n            formData.append('token', token);\r\n            formData.append('regno', regno);\r\n            formData.append('session_id', localStorage.getItem(\"session_id\"));\r\n            formData.append('teacher_email', localStorage.getItem(\"teacher_email\"));\r\n            formData.append('IP', IP);\r\n            formData.append('date', new Date().toISOString().split(\"T\")[0]);\r\n            formData.append('Location', locationString);\r\n            formData.append('student_email', localStorage.getItem(\"email\"));\r\n            formData.append('image', image, 'attendance-photo.png');\r\n            \r\n            try {\r\n              const response = await axios.post(\r\n                `${API_BASE_URL}/sessions/attend_session`,\r\n                formData,\r\n                {\r\n                  headers: {\r\n                    \"Content-Type\": \"multipart/form-data\",\r\n                  },\r\n                }\r\n              );\r\n              //replace the contents of the popup with success message\r\n              document.querySelector(\r\n                \".form-popup-inner\"\r\n              ).innerHTML = `\r\n                <div style=\"text-align: center; padding: 20px;\">\r\n                  <div style=\"font-size: 48px; margin-bottom: 15px;\">✅</div>\r\n                  <h3 style=\"color: #27ae60; margin-bottom: 10px;\">Attendance Marked Successfully!</h3>\r\n                  <p style=\"color: #555; margin-bottom: 20px;\">${response.data.message}</p>\r\n                  <button onclick=\"window.location.reload()\" style=\"\r\n                    background: linear-gradient(135deg, #27ae60, #219a52);\r\n                    color: white;\r\n                    border: none;\r\n                    padding: 10px 25px;\r\n                    border-radius: 20px;\r\n                    cursor: pointer;\r\n                    font-size: 14px;\r\n                  \">Close & Return to Dashboard</button>\r\n                </div>\r\n              `;\r\n            } catch (err) {\r\n              console.error(\"Attendance submission error:\", err);\r\n              \r\n              // Check if it's a 401 error (token expired)\r\n              if (err.response && err.response.status === 401) {\r\n                localStorage.removeItem('token');\r\n                window.location.href = '/login';\r\n                return;\r\n              }\r\n              \r\n              // Get specific error message from server if available\r\n              const errorMessage = err.response?.data?.message || \"Please try again or contact your teacher.\";\r\n              \r\n              // Show error message\r\n              document.querySelector(\r\n                \".form-popup-inner\"\r\n              ).innerHTML = `\r\n                <div style=\"text-align: center; padding: 20px;\">\r\n                  <div style=\"font-size: 48px; margin-bottom: 15px;\">❌</div>\r\n                  <h3 style=\"color: #e74c3c; margin-bottom: 10px;\">Attendance Failed!</h3>\r\n                  <p style=\"color: #555; margin-bottom: 20px;\">${errorMessage}</p>\r\n                  <button onclick=\"window.location.reload()\" style=\"\r\n                    background: linear-gradient(135deg, #e74c3c, #c0392b);\r\n                    color: white;\r\n                    border: none;\r\n                    padding: 10px 25px;\r\n                    border-radius: 20px;\r\n                    cursor: pointer;\r\n                    font-size: 14px;\r\n                  \">Try Again</button>\r\n                </div>\r\n              `;\r\n            }\r\n          } else {\r\n            alert(\"Please fill all the fields\");\r\n          }\r\n        },\r\n        (error) => {\r\n          console.error(\"Error getting geolocation:\", error);\r\n        }\r\n      );\r\n    } else {\r\n      alert(\"Geolocation is not supported by this browser.\");\r\n      console.error(\"Geolocation is not supported by this browser.\");\r\n    }\r\n  };\r\n\r\n  // useEffect to handle component cleanup\r\n  useEffect(() => {\r\n    // Cleanup function to stop camera when component unmounts\r\n    return () => {\r\n      const video = videoRef.current;\r\n      if (video && video.srcObject) {\r\n        const stream = video.srcObject;\r\n        const tracks = stream.getTracks();\r\n        tracks.forEach((track) => track.stop());\r\n        video.srcObject = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"form-popup\">\r\n      <button onClick={togglePopup}>\r\n        <strong>X</strong>\r\n      </button>\r\n      <div className=\"form-popup-inner\">\r\n        <h5>Enter Your Details</h5>\r\n        {!photoData && <video ref={videoRef} width={300} autoPlay={true} />}\r\n        {photoData && <img src={photoData} width={300} alt=\"Captured\" />}\r\n        <div className=\"cam-btn\">\r\n          <button onClick={isCameraActive ? stopCamera : startCamera}>\r\n            {isCameraActive ? 'Stop Camera' : 'Start Camera'}\r\n          </button>\r\n          <button onClick={capturePhoto} disabled={!isCameraActive}>\r\n            Capture\r\n          </button>\r\n          <button onClick={ResetCamera}>Reset</button>\r\n        </div>\r\n\r\n        <form onSubmit={AttendSession}>\r\n          <input\r\n            type=\"text\"\r\n            name=\"regno\"\r\n            placeholder=\"RegNo\"\r\n            autoComplete=\"off\"\r\n          />\r\n          <button type=\"submit\">Done</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}