{"ast":null,"code":"//create a new session component\nimport React,{useEffect,useState}from\"react\";import axios from\"axios\";import API_BASE_URL from\"../config/api\";import QRCode from\"qrcode.react\";import\"../styles/SessionDetails.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SessionDetails=props=>{const[qr,setQR]=useState(\"\");async function getQR(){await axios.post(\"\".concat(API_BASE_URL,\"/sessions/getQR\"),{session_id:props.currentSession[0].session_id,token:localStorage.getItem(\"token\")}).then(response=>{setQR(response.data.url);}).catch(error=>{console.log(error);});}const showImage=e=>{let image=e.target.src;let imageWindow=window.open(\"\",\"_blank\");imageWindow.document.write(\"<img src=\".concat(image,\" alt=\\\"student\\\" width=\\\"50%\\\" />\"));};const copyQR=()=>{navigator.clipboard.writeText(qr);};function getDistance(distance,radius){return{distance,color:distance<=parseFloat(radius)?\"green\":\"red\"};}useEffect(()=>{getQR();});return/*#__PURE__*/_jsxs(\"div\",{className:\"popup\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:props.toggleSessionDetails,children:/*#__PURE__*/_jsx(\"strong\",{children:\"X\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-inner\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"session-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Name\"}),\": \",props.currentSession[0].name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Date\"}),\":\",\" \",props.currentSession[0].date.split(\"T\")[0]]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Time\"}),\": \",props.currentSession[0].time]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Duration\"}),\":\",\" \",props.currentSession[0].duration]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Location\"}),\":\",\" \",props.currentSession[0].location]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Session Radius\"}),\": \",props.currentSession[0].radius,\" \",\"meters\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"qr-code\",children:[/*#__PURE__*/_jsx(QRCode,{value:qr,onClick:copyQR,size:200}),/*#__PURE__*/_jsx(\"button\",{onClick:copyQR,className:\"copybtn\",children:\"Copy\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"student-list scrollable-content\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Students Attended:\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Reg No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"IP\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Distance\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:props.currentSession[0].attendance.map((student,index)=>{return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:student.regno}),/*#__PURE__*/_jsx(\"td\",{children:student.IP}),/*#__PURE__*/_jsx(\"td\",{children:student.date.split(\"T\")[0]}),/*#__PURE__*/_jsx(\"td\",{children:student.student_email}),/*#__PURE__*/_jsx(\"th\",{className:\"distance\",style:{color:getDistance(student.distance,props.currentSession[0].radius).color},children:getDistance(student.distance,props.currentSession[0].radius).distance},index+\"6\"),student.image!==undefined?/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:student.image,alt:\"student\",className:\"student-image\",width:100,onClick:showImage})}):/*#__PURE__*/_jsx(\"td\",{children:\"No Image\"})]},index);})})]})]})]})]});};export default SessionDetails;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}